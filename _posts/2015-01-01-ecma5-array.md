---
layout: post
title: ECMA5系列介绍---Array
tags: [ javascript，ECMA, 无线前端 ]
category: Frontend
description: ECMAScript 5规范在09年正式发布了，随着智能手机的普及和浏览器厂商的支持，无线前端开发者们也终于可以放心的在项目中实际使用了。本文是ECMA5系列介绍的一篇，主要讲解的是关于Array相关的API。
---
##Array.isArray(object)
###描述：判断一个对象是否为数组。
###参数：
object：必需。需要判定的对象。
###返回：
true or false

###示例：

	var arr1 = []
	console.log(Array.isArray(arr1))
	// true
	
	var arr2 = new Array()
	console.log(Array.isArray(arr2))
	// true
	
	var arr3 = [1,2,3,4]
	console.log(Array.isArray(arr3))
	// true
	
	var arr4 = 'is Array'
	console.log(Array.isArray(arr4))
	// false

##array1.indexOf(searchElement[, fromIndex])
###描述：返回某个值在数组中第一个匹配项的索引。
###参数：
array1：必需。一个数组对象<br>
searchElement：必需。搜索的值。<br>
fromIndex：可选。用于开始搜索的数组索引。如果省略 fromIndex，则从索引 0 处开始搜索。
###返回：返回搜索的值在数组中第一个匹配的索引值，找不到，则返回-1
###示例：

	var arr = [1,2,3,3,2,1]
	console.log(arr.indexOf(1))
	// 0
	console.log(arr.indexOf(4))
	// -1
	console.log(arr.indexOf(1,1))
	// 5
	console.log(arr.indexOf(1,-2))
	// 5

###向前兼容：

	Array.prototype.indexOf = Array.prototype.indexOf || function(searchElement) {
		var len = this.length
		var i = +arguments[1] || 0 // fromIndex
		
		if(len === 0 || isNaN(i) || i>=len) {
			return -1
		}
		if(i<0) {
			i = len + i
			i<0 && i=0
		}
		for(; i<len; i++) {
			if( this.hasOwnProperty(String(i)) && this[i] ===  searchElement )
				return i
		}
		return -1
	}

##array1.lastIndexOf(searchElement[, fromIndex])
###描述：返回搜索值在数组中最后一个匹配项的索引。
###参数：
array1：必需。一个数组对象。<br>
searchElement：必需。搜索的值。<br>
fromIndex：可选。用于开始搜索的数组索引。如果省略 fromIndex，则搜索将从数组中的最后一个索引处开始。
###返回：
数组中的 searchElement 的最后一个匹配项的索引；如果未找到 searchElement，则为 -1。
###示例：

	var arr = [1,2,3,3,2,1]
	console.log(arr.lastIndexOf(1))
	// 5
	console.log(arr.lastIndexOf(4))
	// -1
	console.log(arr.lastIndexOf(1,-2))
	// 0
	
###向前兼容写法：

	Array.prototype.lastIndexOf = Array.prototype.lastIndexOf || function(searchElement) {
		var len = this.length
		var i = +arguments[1] || len-1 // fromIndex
		
		if(len === 0 || isNaN(i) || i>=len) {
			return -1
		}
		if(i<0) {
			i = len + i
		}else if(i>=len){
			i = len - 1
		}
		
		for(; i>=0; i--) {
			if( this.hasOwnProperty(String(i)) && this[i] ===  searchElement )
				return i
		}
		return -1
	}

##array1.every(callbackfn[, thisArg])
###描述：确定数组成员是否满足指定测试。
###参数：
array1：必需。一个数组对象。<br>
callbackfn：必需。一个接受最多三个参数的函数。every 方法会为 array1 中的每个元素调用 callbackfn 函数，直到 callbackfn 返回 false，或直到到达数组的结尾。<br>
thisArg：可选。可在 callbackfn 函数中为其引用 this 关键字的对象。如果省略 thisArg，则 undefined 将用作 this 值。
###返回值：
如果 callbackfn 函数为所有数组元素返回 true，则为 true；否则为 false。如果数组没有元素，则 every 方法将返回 true。
###备注：
every 方法会按升序顺序对每个数组元素调用一次 callbackfn 函数，直到 callbackfn 函数返回 false。 如果找到导致 callbackfn 返回 false 的元素，则 every 方法会立即返回 false。 否则，every 方法返回 true。
####回调函数语法
回调函数的语法如下所示：<br>
function callbackfn(value, index, array1)<br>
可使用最多三个参数来声明回调函数。<br>
value：数组元素的值。<br>
index：数组元素的数字索引。<br>
array1：包含该元素的数组对象。
###示例：
	
	var arr = [1,2,3,4]
	var result = arr.every(function(value) {
		return value>0
	})
	console.log(result)
	// true

下面例子解释thisArg的用法：
	
	var arr = [1,2,3,4]
	var result = arr.every(function(value) {
		return value>this.zero
	},{
		zero: 0
	})
	console.log(result)
	// true

###向前兼容写法：

	var __isCallable = (function(){ 
		
		var __sortCase = (function(){
				try {
					[].sort('abc');
					return false;
				} catch(ex) {
					return true;
				}
			})();
		
		return function(obj){
			if( typeof obj === 'function' )
				return true;
			if( typeof obj !== 'object' ) 
				return false;
			if( obj instanceof Function || obj instanceof RegExp )
				return true;
			if( __sortCase ) {
				try {
					[].sort(obj);
					return true;
				} catch(ex){ /* nothing to do */ }
			}
			return false;
		};
	})();
	
	Array.prototype.every = Array.prototype.every || function(callback){
		if( !__isCallable(callback) )
			throw new TypeError( callback + " is not a callable object" );

		var thisArg = arguments[1]; 
		for(var i=0, len=this.length; i < len; i++) {
			if( this.hasOwnProperty(String(i)) ) {
				if( !callback.call(thisArg, this[i], i, this) )
					return false;
			}
		}

		return true;
	};
			

##如果有任何问题都可以在下方给予我留言~

